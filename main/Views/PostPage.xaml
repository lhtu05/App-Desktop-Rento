<UserControl x:Class="main.Views.PostPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:sys="clr-namespace:System;assembly=mscorlib">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Background="#F5F5F5">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <!-- Header -->
            <Border Background="#2E86AB" Height="70" Margin="0,0,0,20" VerticalAlignment="Top">
                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                        <Button Style="{StaticResource MaterialDesignFlatButton}"
                                Foreground="White" Margin="20,0,0,0"
                                Click="BackButton_Click">
                            <materialDesign:PackIcon Kind="ArrowLeft" Width="24" Height="24"/>
                        </Button>
                        <TextBlock Text="Đăng phòng mới" 
                                  Foreground="White" FontSize="24" FontWeight="Bold" 
                                  VerticalAlignment="Center" Margin="20,0,0,0"/>
                    </StackPanel>

                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,20,0">
                        
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Form Content -->
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="20"/>
                    <ColumnDefinition Width="400"/>
                </Grid.ColumnDefinitions>

                <!-- Left Column - Form Fields -->
                <StackPanel Grid.Column="0">

                    <!-- Basic Information -->
                    <Border Background="White" CornerRadius="10" Padding="30" Margin="0,0,0,20">
                        <StackPanel>
                            <TextBlock Text="Thông tin cơ bản" FontSize="18" FontWeight="Bold" 
                                      Foreground="#2E86AB" Margin="0,0,0,20"/>

                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="150"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <!-- Title -->
                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Tiêu đề*:" 
                                          FontWeight="SemiBold" Margin="0,0,0,15"/>
                                <TextBox Grid.Row="0" Grid.Column="1" x:Name="txtTitle" 
                                         FontSize="14" Padding="10" 
                                         BorderBrush="#E0E0E0" BorderThickness="1"
                                         materialDesign:HintAssist.Hint="Ví dụ: Phòng trọ mới đẹp full nội thất"
                                         Margin="0,0,0,15"/>

                                <!-- Address -->
                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Địa chỉ*:" 
                                          FontWeight="SemiBold" Margin="0,0,0,15"/>
                                <StackPanel Grid.Row="1" Grid.Column="1" Margin="0,0,0,15">
                                    <TextBox x:Name="txtAddress" 
                                             FontSize="14" Padding="10" 
                                             BorderBrush="#E0E0E0" BorderThickness="1"
                                             materialDesign:HintAssist.Hint="Số nhà, tên đường"
                                             Margin="0,0,0,10"/>
                                    <ComboBox x:Name="cmbCity" Width="250" HorizontalAlignment="Left"
                                             FontSize="14" Padding="10" 
                                             materialDesign:HintAssist.Hint="Tỉnh/Thành phố"
                                             DisplayMemberPath="Name"
                                             SelectedValuePath="ID"
                                             SelectionChanged="cmbCity_SelectionChanged"/>

                                    <ComboBox x:Name="cmbWard" Width="250" HorizontalAlignment="Left"
                                             FontSize="14" Padding="10" 
                                             materialDesign:HintAssist.Hint="Phường/Xã"
                                             DisplayMemberPath="Name"
                                             SelectedValuePath="ID"
                                             Margin="0,10,0,0"/>
                                </StackPanel>

                                <!-- Price & Area -->
                                <Grid Grid.Row="2" Grid.ColumnSpan="2" Margin="0,0,0,15">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="20"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="20"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="20"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <!-- Price -->
                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="Giá thuê/tháng*" FontWeight="SemiBold" Margin="0,0,0,10"/>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="250"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBox Grid.Column="0" x:Name="txtPrice" 
                                                     FontSize="14" Padding="10"
                                                     BorderBrush="#E0E0E0" BorderThickness="1" TextChanged="txtPrice_TextChanged"/>
                                            <TextBlock Grid.Column="1" Text="đ" Margin="10,0,0,0" 
                                                      VerticalAlignment="Center"/>
                                        </Grid>
                                    </StackPanel>

                                    <!-- Area -->
                                    <StackPanel Grid.Column="2">
                                        <TextBlock Text="Diện tích (m²)*" FontWeight="SemiBold" Margin="0,0,0,10"/>
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="250"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBox Grid.Column="0" x:Name="txtArea" 
                                                     FontSize="14" Padding="10" 
                                                     BorderBrush="#E0E0E0" BorderThickness="1"/>
                                            <TextBlock Grid.Column="1" Text="m²" Margin="10,0,0,0" 
                                                      VerticalAlignment="Center"/>
                                        </Grid>
                                    </StackPanel>

                                    <!-- Deposit -->
                                    <StackPanel Grid.Column="4">
                                        <TextBlock Grid.Column="0" Text="Tiền cọc*:" 
                                                   FontWeight="SemiBold" Margin="0,0,0,15"/>
                                        <Grid Grid.Column="1" Margin="0,0,0,15">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="250"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBox Grid.Column="0" x:Name="txtDeposit" 
                                                     FontSize="14" Padding="10" 
                                                     BorderBrush="#E0E0E0" BorderThickness="1"/>
                                            <TextBlock Grid.Column="1" Text="đ" Margin="10,0,0,0" 
                                                       VerticalAlignment="Center"/>
                                        </Grid>
                                    </StackPanel>

                                    <!-- Status -->
                                    <StackPanel Grid.Column="6">
                                        <TextBlock Grid.Column="0" Text="Số phòng*:" 
                                                   FontWeight="SemiBold" Margin="0,0,0,15"/>
                                        <Grid Grid.Column="1" Margin="0,0,0,15">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="75"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBox Grid.Column="0" x:Name="txtStatus" 
                                                     FontSize="14" Padding="10" 
                                                     BorderBrush="#E0E0E0" BorderThickness="1"/>
                                            <TextBlock Grid.Column="1" Text="phòng" Margin="10,0,0,0" 
                                                       VerticalAlignment="Center"/>
                                        </Grid>
                                    </StackPanel>
                                </Grid>

                                <!-- Room Type -->
                                <Grid Grid.Row="3">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="75"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="Loại phòng*:" 
                                          FontWeight="SemiBold" Margin="0,0,0,15" Height="35" VerticalAlignment="Bottom"/>
                                    <ComboBox Grid.Column="1"
                                          x:Name="cmbPropertyType" Width="250" HorizontalAlignment="Left"
                                          FontSize="14" 
                                          DisplayMemberPath="Name"
                                          SelectedValuePath="ID"
                                          Margin="0,10,0,0"/>
                                </Grid>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- Amenities -->
                    <Border Background="White" CornerRadius="10" Padding="30" Margin="0,0,0,20">
                        <StackPanel>
                            <TextBlock Text="Tiện ích" FontSize="18" FontWeight="Bold" 
                                      Foreground="#2E86AB" Margin="0,0,0,20"/>

                            <TextBlock Text="Chọn các tiện ích có sẵn:" FontWeight="SemiBold" Margin="0,0,0,15"/>

                            <WrapPanel>
                                <CheckBox x:Name="chkWifi" Content="WiFi" Margin="0,0,20,15"/>
                                <CheckBox x:Name="chkParking" Content="Chỗ để xe" Margin="0,0,20,15"/>
                                <CheckBox x:Name="chkAirCon" Content="Điều hòa" Margin="0,0,20,15"/>
                                <CheckBox x:Name="chkWaterHeater" Content="Nóng lạnh" Margin="0,0,20,15"/>
                                <CheckBox x:Name="chkFridge" Content="Tủ lạnh" Margin="0,0,20,15"/>
                                <CheckBox x:Name="chkWashing" Content="Máy giặt" Margin="0,0,20,15"/>
                                <CheckBox x:Name="chkKitchen" Content="Bếp" Margin="0,0,20,15"/>
                                <CheckBox x:Name="chkSecurity" Content="Bảo vệ 24/7" Margin="0,0,20,15"/>
                                <CheckBox x:Name="chkCamera" Content="Camera an ninh" Margin="0,0,20,15"/>
                                <CheckBox x:Name="chkElevator" Content="Thang máy" Margin="0,0,20,15"/>
                                <CheckBox x:Name="chkPet" Content="Cho phép thú cưng" Margin="0,0,20,15"/>
                                <CheckBox x:Name="chkGym" Content="Phòng gym" Margin="0,0,20,15"/>
                                <CheckBox x:Name="chkPool" Content="Hồ bơi" Margin="0,0,20,15"/>
                            </WrapPanel>
                        </StackPanel>
                    </Border>

                    <!-- Description -->
                    <Border Background="White" CornerRadius="10" Padding="30" Margin="0,0,0,20">
                        <StackPanel>
                            <TextBlock Text="Mô tả chi tiết" FontSize="18" FontWeight="Bold" 
                                      Foreground="#2E86AB" Margin="0,0,0,20"/>

                            <TextBlock Text="Hãy mô tả chi tiết về phòng của bạn để thu hút người thuê:" 
                                      FontWeight="SemiBold" Margin="0,0,0,15"/>

                            <TextBox x:Name="txtDescription" 
                                     AcceptsReturn="True" TextWrapping="Wrap"
                                     Height="200" FontSize="14" Padding="15" 
                                     BorderBrush="#E0E0E0" BorderThickness="1"
                                     VerticalScrollBarVisibility="Auto"
                                     materialDesign:HintAssist.Hint="Ví dụ: Phòng mới xây, sạch sẽ, yên tĩnh, gần trường học, chợ, siêu thị. Có đầy đủ nội thất cơ bản..."/>
                        </StackPanel>
                    </Border>

                    <!-- Navigation Buttons -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,30,0,0">
                        <Button Content="Quay lại" Width="120" Height="40"
                                Background="#9E9E9E" Foreground="White" FontSize="14"
                                Margin="0,0,20,0" Click="BackButton_Click"/>
                        <Button Content="Xem trước" Width="120" Height="40"
                                Background="#2196F3" Foreground="White"
                                Padding="15,8" Margin="0,0,20,0"
                                FontSize="14" FontWeight="SemiBold"
                                Click="PreviewButton_Click"/>
                        <Button Content="Đăng ngay" Width="120" Height="40"
                                Background="#4CAF50" Foreground="White"
                                Padding="15,8" FontSize="14" FontWeight="SemiBold"
                                Click="PostButton_Click"/> 
                    </StackPanel>
                </StackPanel>

                <!-- Right Column - Preview & Tips -->
                <Border Grid.Column="2" Background="White" CornerRadius="10" Padding="20">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            <!-- Preview Section -->
                            <StackPanel Margin="0,0,0,30">
                                <TextBlock Text="Xem trước" FontSize="18" FontWeight="Bold" 
                                          Foreground="#2E86AB" Margin="0,0,0,15"/>

                                <Border BorderBrush="#E0E0E0" BorderThickness="1" CornerRadius="5" Padding="15">
                                    <StackPanel>
                                        <TextBlock x:Name="txtPreviewTitle" Text="[Tiêu đề phòng]" 
                                                  FontSize="16" FontWeight="Bold" 
                                                  Foreground="#2E86AB" Margin="0,0,0,10"/>

                                        <TextBlock x:Name="txtPreviewAddress" Text="[Địa chỉ]" 
                                                  Foreground="#666" Margin="0,0,0,10"/>

                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                            <TextBlock x:Name="txtPreviewPrice" Text="[Giá]" 
                                                      FontSize="18" FontWeight="Bold" 
                                                      Foreground="#FF6B6B" Margin="0,0,20,0"/>
                                            <TextBlock x:Name="txtPreviewArea" Text="[Diện tích]" 
                                                      Foreground="#666"/>
                                        </StackPanel>

                                        <TextBlock x:Name="txtPreviewDescription" Text="[Mô tả ngắn...]" 
                                                  Foreground="#666" TextWrapping="Wrap"
                                                  FontSize="13"/>
                                    </StackPanel>
                                </Border>
                            </StackPanel>

                            <!-- Tips Section -->
                            <StackPanel>
                                <TextBlock Text="Mẹo đăng bài hiệu quả" FontSize="18" FontWeight="Bold" 
                                          Foreground="#2E86AB" Margin="0,0,0,15"/>

                                <StackPanel Margin="0,0,0,15">
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                        <materialDesign:PackIcon Kind="CheckCircle" 
                                                                Foreground="#4CAF50" Width="20" Height="20"/>
                                        <TextBlock Text=" Tiêu đề hấp dẫn" FontWeight="SemiBold" 
                                                  Margin="5,0,0,0"/>
                                    </StackPanel>
                                    <TextBlock Text="Sử dụng từ ngữ tích cực, nêu bật điểm mạnh" 
                                              FontSize="13" Foreground="#666" Margin="25,5,0,0"/>
                                </StackPanel>

                                <StackPanel Margin="0,0,0,15">
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                        <materialDesign:PackIcon Kind="CheckCircle" 
                                                                Foreground="#4CAF50" Width="20" Height="20"/>
                                        <TextBlock Text=" Hình ảnh chất lượng" FontWeight="SemiBold" 
                                                  Margin="5,0,0,0"/>
                                    </StackPanel>
                                    <TextBlock Text="Chụp ảnh sáng, rõ nét, đầy đủ góc" 
                                              FontSize="13" Foreground="#666" Margin="25,5,0,0"/>
                                </StackPanel>

                                <StackPanel Margin="0,0,0,15">
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                        <materialDesign:PackIcon Kind="CheckCircle" 
                                                                Foreground="#4CAF50" Width="20" Height="20"/>
                                        <TextBlock Text=" Mô tả chi tiết" FontWeight="SemiBold" 
                                                  Margin="5,0,0,0"/>
                                    </StackPanel>
                                    <TextBlock Text="Liệt kê đầy đủ tiện ích, quy tắc" 
                                              FontSize="13" Foreground="#666" Margin="25,5,0,0"/>
                                </StackPanel>

                                <StackPanel Margin="0,0,0,15">
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                                        <materialDesign:PackIcon Kind="CheckCircle" 
                                                                Foreground="#4CAF50" Width="20" Height="20"/>
                                        <TextBlock Text=" Giá cả hợp lý" FontWeight="SemiBold" 
                                                  Margin="5,0,0,0"/>
                                    </StackPanel>
                                    <TextBlock Text="Tham khảo giá khu vực trước khi đăng" 
                                              FontSize="13" Foreground="#666" Margin="25,5,0,0"/>
                                </StackPanel>
                            </StackPanel>

                            <!-- Image Upload -->
                            <Border BorderBrush="#E0E0E0" BorderThickness="2" CornerRadius="5" 
                                    Background="#F8F9FA" Padding="20" Margin="0,30,0,0">
                                <StackPanel>
                                    <TextBlock Text="Tải ảnh lên" FontWeight="SemiBold" 
                                              HorizontalAlignment="Center" Margin="0,0,0,10"/>

                                    <Button Content="Chọn hình ảnh" 
                                            Background="#2E86AB" Foreground="White"
                                            Padding="20,10" FontSize="14"
                                            HorizontalAlignment="Center"
                                            Click="UploadImages_Click"/>

                                    <TextBlock Text="Tối đa 10 hình, mỗi hình ≤ 5MB" 
                                              Foreground="#666" FontSize="12" 
                                              Margin="0,10,0,0" HorizontalAlignment="Center"/>

                                    <!-- Uploaded Images List -->
                                    <ItemsControl x:Name="uploadedImagesList" Margin="0,20,0,0">
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border BorderBrush="#E0E0E0" BorderThickness="1" 
                                                        CornerRadius="5" Margin="0,0,0,5" Padding="10">
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>
                                                        <TextBlock Text="{Binding FileName}" 
                                                                  VerticalAlignment="Center"
                                                                  TextTrimming="CharacterEllipsis"/>
                                                        <Button Grid.Column="1" Content="Xóa" 
                                                                Background="#F44336" Foreground="White"
                                                                Padding="5,2" FontSize="11"
                                                                Click="DeleteUploadedImage_Click"
                                                                Tag="{Binding FileName}"/>
                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </ScrollViewer>
                </Border>
            </Grid>
        </Grid>
    </ScrollViewer>
</UserControl>