<UserControl x:Class="main.Views.HostRoomDetail"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Background="#F5F5F5">
            <!-- Header -->
            <Border Background="#2E86AB" Height="70" VerticalAlignment="Top">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                        <Button Style="{StaticResource MaterialDesignFlatButton}"
                                Foreground="White" Margin="20,0,0,0"
                                Click="BackButton_Click">
                            <materialDesign:PackIcon Kind="ArrowLeft" Width="24" Height="24"/>
                        </Button>
                        <TextBlock x:Name="txtHeaderTitle" Text="Chi tiết phòng" 
                                  Foreground="White" FontSize="20" FontWeight="Bold" 
                                  VerticalAlignment="Center" Margin="20,0,0,0"/>
                    </StackPanel>

                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,20,0">
                        <Button x:Name="btnEditMode" Content="Chỉnh sửa" 
                                Background="#FFC107" Foreground="#333"
                                Padding="15,8" Margin="0,0,10,0"
                                FontSize="14" FontWeight="SemiBold"
                                Click="EditModeButton_Click"/>
                        <Button Content="Lưu thay đổi" 
                                Background="#4CAF50" Foreground="White"
                                Padding="15,8" FontSize="14" FontWeight="SemiBold"
                                Click="SaveButton_Click"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Main Content -->
            <Grid Margin="0,70,0,0" Padding="20">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="20"/>
                    <ColumnDefinition Width="350"/>
                </Grid.ColumnDefinitions>

                <!-- Left Column - Editable Details -->
                <StackPanel Grid.Column="0">
                    <!-- Basic Info -->
                    <Border Background="White" CornerRadius="10" Padding="20" Margin="0,0,0,20">
                        <StackPanel>
                            <TextBlock Text="Thông tin cơ bản" FontSize="18" FontWeight="Bold" 
                                      Foreground="#2E86AB" Margin="0,0,0,15"/>

                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="150"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Tiêu đề*:" 
                                          FontWeight="SemiBold" Margin="0,0,0,10"/>
                                <TextBox Grid.Row="0" Grid.Column="1" x:Name="txtEditTitle" 
                                         Text="{Binding Title}" FontSize="14" Padding="5"
                                         BorderBrush="#E0E0E0" BorderThickness="1"
                                         Margin="0,0,0,10"/>

                                <TextBlock Grid.Row="1" Grid.Column="0" Text="Địa chỉ*:" 
                                          FontWeight="SemiBold" Margin="0,0,0,10"/>
                                <TextBox Grid.Row="1" Grid.Column="1" x:Name="txtEditAddress" 
                                         Text="{Binding Address}" FontSize="14" Padding="5"
                                         BorderBrush="#E0E0E0" BorderThickness="1"
                                         Margin="0,0,0,10"/>

                                <TextBlock Grid.Row="2" Grid.Column="0" Text="Diện tích*:" 
                                          FontWeight="SemiBold" Margin="0,0,0,10"/>
                                <Grid Grid.Row="2" Grid.Column="1" Margin="0,0,0,10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBox Grid.Column="0" x:Name="txtEditArea" 
                                             Text="{Binding Area}" FontSize="14" Padding="5"
                                             BorderBrush="#E0E0E0" BorderThickness="1"/>
                                    <TextBlock Grid.Column="1" Text="m²" Margin="10,0,0,0" 
                                              VerticalAlignment="Center"/>
                                </Grid>

                                <TextBlock Grid.Row="3" Grid.Column="0" Text="Loại phòng*:" 
                                          FontWeight="SemiBold" Margin="0,0,0,10"/>
                                <ComboBox Grid.Row="3" Grid.Column="1" x:Name="cmbEditRoomType" 
                                          SelectedValue="{Binding RoomType}" Margin="0,0,0,10">
                                    <ComboBoxItem Content="Phòng trọ"/>
                                    <ComboBoxItem Content="Chung cư mini"/>
                                    <ComboBoxItem Content="Nhà nguyên căn"/>
                                    <ComboBoxItem Content="Căn hộ dịch vụ"/>
                                </ComboBox>

                                <TextBlock Grid.Row="4" Grid.Column="0" Text="Sức chứa*:" 
                                          FontWeight="SemiBold" Margin="0,0,0,10"/>
                                <ComboBox Grid.Row="4" Grid.Column="1" x:Name="cmbEditCapacity" 
                                          SelectedIndex="0" Margin="0,0,0,10">
                                    <ComboBoxItem Content="1 người"/>
                                    <ComboBoxItem Content="2 người"/>
                                    <ComboBoxItem Content="3 người"/>
                                    <ComboBoxItem Content="4 người"/>
                                    <ComboBoxItem Content="Trên 4 người"/>
                                </ComboBox>
                            </Grid>
                        </StackPanel>
                    </Border>

                    <!-- Price & Status -->
                    <Border Background="White" CornerRadius="10" Padding="20" Margin="0,0,0,20">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="20"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- Price -->
                            <StackPanel Grid.Row="0" Grid.Column="0">
                                <TextBlock Text="Giá thuê*" FontWeight="SemiBold" Margin="0,0,0,10"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBox Grid.Column="0" x:Name="txtEditPrice" 
                                             Text="{Binding Price}" FontSize="14" Padding="5"
                                             BorderBrush="#E0E0E0" BorderThickness="1"/>
                                    <TextBlock Grid.Column="1" Text="đ/tháng" Margin="10,0,0,0" 
                                              VerticalAlignment="Center"/>
                                </Grid>
                            </StackPanel>

                            <!-- Deposit -->
                            <StackPanel Grid.Row="0" Grid.Column="2">
                                <TextBlock Text="Tiền cọc*" FontWeight="SemiBold" Margin="0,0,0,10"/>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBox Grid.Column="0" x:Name="txtEditDeposit" 
                                             Text="{Binding Deposit}" FontSize="14" Padding="5"
                                             BorderBrush="#E0E0E0" BorderThickness="1"/>
                                    <TextBlock Grid.Column="1" Text="đ" Margin="10,0,0,0" 
                                              VerticalAlignment="Center"/>
                                </Grid>
                            </StackPanel>

                            <!-- Status -->
                            <StackPanel Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="3" Margin="0,20,0,0">
                                <TextBlock Text="Trạng thái" FontWeight="SemiBold" Margin="0,0,0,10"/>
                                <ComboBox x:Name="cmbEditStatus" SelectedIndex="0">
                                    <ComboBoxItem Content="Đang trống" Background="#4CAF50" Foreground="White"/>
                                    <ComboBoxItem Content="Đang thuê" Background="#F44336" Foreground="White"/>
                                    <ComboBoxItem Content="Đang bảo trì" Background="#FFC107" Foreground="#333"/>
                                </ComboBox>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- Description -->
                    <Border Background="White" CornerRadius="10" Padding="20" Margin="0,0,0,20">
                        <StackPanel>
                            <TextBlock Text="Mô tả chi tiết" FontSize="18" FontWeight="Bold" 
                                      Foreground="#2E86AB" Margin="0,0,0,15"/>
                            <TextBox x:Name="txtEditDescription" 
                                     AcceptsReturn="True" TextWrapping="Wrap"
                                     Height="150" FontSize="14" Padding="10" 
                                     BorderBrush="#E0E0E0" BorderThickness="1"
                                     VerticalScrollBarVisibility="Auto"
                                     Text="{Binding Description}"/>
                        </StackPanel>
                    </Border>

                    <!-- Amenities -->
                    <Border Background="White" CornerRadius="10" Padding="20">
                        <StackPanel>
                            <TextBlock Text="Tiện ích" FontSize="18" FontWeight="Bold" 
                                      Foreground="#2E86AB" Margin="0,0,0,15"/>
                            <WrapPanel>
                                <CheckBox x:Name="chkEditWiFi" Content="WiFi" Margin="0,0,20,10"/>
                                <CheckBox x:Name="chkEditParking" Content="Chỗ để xe" Margin="0,0,20,10"/>
                                <CheckBox x:Name="chkEditAirCon" Content="Máy lạnh" Margin="0,0,20,10"/>
                                <CheckBox x:Name="chkEditWaterHeater" Content="Nóng lạnh" Margin="0,0,20,10"/>
                                <CheckBox x:Name="chkEditFridge" Content="Tủ lạnh" Margin="0,0,20,10"/>
                                <CheckBox x:Name="chkEditWashing" Content="Máy giặt" Margin="0,0,20,10"/>
                                <CheckBox x:Name="chkEditKitchen" Content="Bếp" Margin="0,0,20,10"/>
                                <CheckBox x:Name="chkEditSecurity" Content="Bảo vệ 24/7" Margin="0,0,20,10"/>
                                <CheckBox x:Name="chkEditCamera" Content="Camera an ninh" Margin="0,0,20,10"/>
                                <CheckBox x:Name="chkEditElevator" Content="Thang máy" Margin="0,0,20,10"/>
                            </WrapPanel>
                        </StackPanel>
                    </Border>
                </StackPanel>

                <!-- Right Column - Stats & Actions -->
                <Border Grid.Column="2" Background="White" CornerRadius="10" Padding="20">
                    <StackPanel>
                        <!-- Statistics -->
                        <StackPanel Margin="0,0,0,30">
                            <TextBlock Text="Thống kê" FontSize="18" FontWeight="Bold" 
                                      Foreground="#2E86AB" Margin="0,0,0,15"/>

                            <StackPanel Margin="0,0,0,15">
                                <TextBlock Text="Lượt xem" FontSize="14" Foreground="#666"/>
                                <TextBlock x:Name="txtViewCount" Text="1,245" 
                                          FontSize="24" FontWeight="Bold" 
                                          Foreground="#2E86AB"/>
                            </StackPanel>

                            <StackPanel Margin="0,0,0,15">
                                <TextBlock Text="Yêu thích" FontSize="14" Foreground="#666"/>
                                <TextBlock x:Name="txtFavoriteCount" Text="42" 
                                          FontSize="24" FontWeight="Bold" 
                                          Foreground="#2E86AB"/>
                            </StackPanel>

                            <StackPanel Margin="0,0,0,15">
                                <TextBlock Text="Yêu cầu xem phòng" FontSize="14" Foreground="#666"/>
                                <TextBlock x:Name="txtBookingRequests" Text="15" 
                                          FontSize="24" FontWeight="Bold" 
                                          Foreground="#2E86AB"/>
                            </StackPanel>
                        </StackPanel>

                        <!-- Images Management -->
                        <StackPanel Margin="0,0,0,30">
                            <TextBlock Text="Hình ảnh" FontSize="18" FontWeight="Bold" 
                                      Foreground="#2E86AB" Margin="0,0,0,15"/>

                            <Border BorderBrush="#E0E0E0" BorderThickness="2" 
                                    BorderThickness="2" CornerRadius="5" 
                                    Background="#F8F9FA" Padding="20">
                                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                                    <Button Content="Thêm/Tải ảnh lên" 
                                            Background="#2E86AB" Foreground="White"
                                            Padding="20,10" FontSize="14"
                                            Click="UploadImages_Click"/>
                                    <TextBlock Text="Tối đa 10 hình, mỗi hình ≤ 5MB" 
                                              Foreground="#666" FontSize="12" 
                                              Margin="0,10,0,0" HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Border>

                            <!-- Image List -->
                            <ItemsControl x:Name="imageListControl" Margin="0,20,0,0">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border BorderBrush="#E0E0E0" BorderThickness="1" 
                                                CornerRadius="5" Margin="0,0,0,10" Padding="10">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Text="{Binding FileName}" 
                                                          VerticalAlignment="Center"/>
                                                <Button Grid.Column="1" Content="Xóa" 
                                                        Background="#F44336" Foreground="White"
                                                        Padding="5,2" FontSize="12"
                                                        Click="DeleteImage_Click"
                                                        Tag="{Binding FileName}"/>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>

                        <!-- Actions -->
                        <StackPanel>
                            <Button Content="Xem trước trang chi tiết" 
                                    Background="#2196F3" Foreground="White"
                                    FontSize="14" FontWeight="SemiBold" Padding="15,8"
                                    HorizontalAlignment="Stretch" Margin="0,0,0,10"
                                    Click="PreviewButton_Click"/>

                            <Button Content="Xóa phòng này" 
                                    Background="#F44336" Foreground="White"
                                    FontSize="14" FontWeight="SemiBold" Padding="15,8"
                                    HorizontalAlignment="Stretch"
                                    Click="DeleteButton_Click"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </Grid>
        </Grid>
    </ScrollViewer>
</UserControl>