<UserControl x:Class="main.Views.RoomList"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:local="clr-namespace:main.Views">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Background="#F5F5F5">
            <!-- Header -->
            <Border Background="#2E86AB" Height="70" VerticalAlignment="Top">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                        <Button Style="{StaticResource MaterialDesignFlatButton}"
                                Foreground="White" Margin="20,0,0,0"
                                Click="BackButton_Click">
                            <materialDesign:PackIcon Kind="ArrowLeft" Width="24" Height="24"/>
                        </Button>
                        <TextBlock x:Name="txtHeaderTitle" Text="Tìm phòng trọ" 
                                  Foreground="White" FontSize="24" FontWeight="Bold" 
                                  VerticalAlignment="Center" Margin="20,0,0,0"/>
                    </StackPanel>

                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,20,0">
                        <Button x:Name="btnFilter" Content="Bộ lọc" 
                                Background="White" Foreground="#2E86AB"
                                Padding="15,8" Margin="0,0,10,0"
                                FontSize="14" FontWeight="SemiBold"
                                Click="FilterButton_Click"/>
                        <Button Content="Bản đồ" 
                                Background="White" Foreground="#2E86AB"
                                Padding="15,8" FontSize="14" FontWeight="SemiBold"
                                Click="MapButton_Click"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Main Content -->
            <Grid Margin="0,70,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="300"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Sidebar Filters -->
                <Border Grid.Column="0" Background="White" Margin="10" Padding="20" CornerRadius="10">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            <TextBlock Text="Bộ lọc tìm kiếm" FontSize="16" FontWeight="Bold" 
                                      Foreground="#2E86AB" Margin="0,0,0,20"/>

                            <!-- Price Range -->
                            <StackPanel Margin="0,0,0,20">
                                <TextBlock Text="Khoảng giá" FontWeight="SemiBold" Margin="0,0,0,10"/>
                                <ComboBox x:Name="cmbPriceRange" SelectedIndex="0">
                                    <ComboBoxItem Content="Tất cả"/>
                                    <ComboBoxItem Content="Dưới 2 triệu"/>
                                    <ComboBoxItem Content="2-3 triệu"/>
                                    <ComboBoxItem Content="3-5 triệu"/>
                                    <ComboBoxItem Content="5-7 triệu"/>
                                    <ComboBoxItem Content="Trên 7 triệu"/>
                                </ComboBox>
                            </StackPanel>

                            <!-- Area Range -->
                            <StackPanel Margin="0,0,0,20">
                                <TextBlock Text="Diện tích" FontWeight="SemiBold" Margin="0,0,0,10"/>
                                <ComboBox x:Name="cmbAreaRange" SelectedIndex="0">
                                    <ComboBoxItem Content="Tất cả"/>
                                    <ComboBoxItem Content="Dưới 20m²"/>
                                    <ComboBoxItem Content="20-30m²"/>
                                    <ComboBoxItem Content="30-50m²"/>
                                    <ComboBoxItem Content="Trên 50m²"/>
                                </ComboBox>
                            </StackPanel>

                            <!-- Room Type -->
                            <StackPanel Margin="0,0,0,20">
                                <TextBlock Text="Loại phòng" FontWeight="SemiBold" Margin="0,0,0,10"/>
                                <StackPanel>
                                    <CheckBox x:Name="chkRoomType1" Content="Phòng trọ" IsChecked="True" Margin="0,0,0,5"/>
                                    <CheckBox x:Name="chkRoomType2" Content="Chung cư mini" IsChecked="True" Margin="0,0,0,5"/>
                                    <CheckBox x:Name="chkRoomType3" Content="Nhà nguyên căn" IsChecked="True" Margin="0,0,0,5"/>
                                    <CheckBox x:Name="chkRoomType4" Content="Căn hộ dịch vụ" IsChecked="True" Margin="0,0,0,5"/>
                                </StackPanel>
                            </StackPanel>

                            <!-- Amenities -->
                            <StackPanel Margin="0,0,0,20">
                                <TextBlock Text="Tiện ích" FontWeight="SemiBold" Margin="0,0,0,10"/>
                                <StackPanel>
                                    <CheckBox x:Name="chkWiFi" Content="WiFi" Margin="0,0,0,5"/>
                                    <CheckBox x:Name="chkParking" Content="Chỗ để xe" Margin="0,0,0,5"/>
                                    <CheckBox x:Name="chkAirCon" Content="Máy lạnh" Margin="0,0,0,5"/>
                                    <CheckBox x:Name="chkCamera" Content="Camera an ninh" Margin="0,0,0,5"/>
                                    <CheckBox x:Name="chkWashing" Content="Máy giặt" Margin="0,0,0,5"/>
                                </StackPanel>
                            </StackPanel>

                            <!-- Apply Button -->
                            <Button Content="Áp dụng" 
                                    Background="#2E86AB" Foreground="White"
                                    Padding="15" FontSize="14" FontWeight="SemiBold"
                                    HorizontalAlignment="Stretch"
                                    Click="ApplyFilterButton_Click"/>
                        </StackPanel>
                    </ScrollViewer>
                </Border>

                <!-- Property List -->
                <Border Grid.Column="1" Background="White" Margin="10" Padding="20" CornerRadius="10">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <StackPanel>
                            <!-- Search Results Header -->
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                                <TextBlock x:Name="txtResultCount" Text="Tìm thấy 156 phòng" 
                                          FontSize="18" FontWeight="Bold" Foreground="#2E86AB"/>
                                <ComboBox x:Name="cmbSortBy" Margin="20,0,0,0" Width="200" SelectedIndex="0">
                                    <ComboBoxItem Content="Sắp xếp: Mới nhất"/>
                                    <ComboBoxItem Content="Sắp xếp: Giá thấp đến cao"/>
                                    <ComboBoxItem Content="Sắp xếp: Giá cao đến thấp"/>
                                    <ComboBoxItem Content="Sắp xếp: Diện tích"/>
                                </ComboBox>
                            </StackPanel>

                            <!-- Property Items -->
                            <ItemsControl x:Name="propertyItemsControl">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Border BorderBrush="#E0E0E0" BorderThickness="0,0,0,1" 
                                                Padding="0,0,0,20" Margin="0,0,0,20">
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="250"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="150"/>
                                                </Grid.ColumnDefinitions>

                                                <!-- Property Image -->
                                                <Border Grid.Column="0" Width="250" Height="180" 
                                                        Background="#F8F9FA" CornerRadius="5">
                                                    <Image Source="{Binding MainImageUrl}" 
                                                           Stretch="UniformToFill"/>
                                                </Border>

                                                <!-- Property Info -->
                                                <StackPanel Grid.Column="1" Margin="20,0,0,0">
                                                    <TextBlock Text="{Binding Title}" 
                                                              FontSize="16" FontWeight="Bold" 
                                                              Foreground="#2E86AB" Margin="0,0,0,5"/>
                                                    <TextBlock Text="{Binding Address}" 
                                                              Foreground="#666" Margin="0,0,0,5"/>
                                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                                        <TextBlock Text="{Binding Area, StringFormat='{}{0}m²'}" 
                                                                  Foreground="#666" Margin="0,0,20,0"/>
                                                        <TextBlock Text="{Binding RoomType}" 
                                                                  Foreground="#666" Margin="0,0,20,0"/>
                                                        <TextBlock Text="{Binding Capacity, StringFormat='Tối đa {0} người'}" 
                                                                  Foreground="#666"/>
                                                    </StackPanel>
                                                    <WrapPanel>
                                                        <Border Background="#E3F2FD" CornerRadius="3" 
                                                                Padding="5,2" Margin="0,0,5,5">
                                                            <TextBlock Text="{Binding Amenities[0]}" 
                                                                      Foreground="#1976D2" FontSize="11"/>
                                                        </Border>
                                                        <!-- Add more amenities as needed -->
                                                    </WrapPanel>
                                                </StackPanel>

                                                <!-- Price and Action -->
                                                <StackPanel Grid.Column="2" HorizontalAlignment="Right">
                                                    <TextBlock Text="{Binding Price, StringFormat='{}{0:N0} đ/tháng'}" 
                                                              FontSize="18" FontWeight="Bold" 
                                                              Foreground="#FF6B6B" Margin="0,0,0,10"/>
                                                    <Button Content="Xem chi tiết" 
                                                            Background="#2E86AB" Foreground="White"
                                                            Padding="15,8" FontSize="14"
                                                            Click="ViewDetailButton_Click"
                                                            Tag="{Binding ID}"/>
                                                </StackPanel>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>

                            <!-- Pagination -->
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,30,0,0">
                                <Button Content="&lt;" Style="{StaticResource MaterialDesignFlatButton}"
                                        Foreground="#2E86AB" FontWeight="Bold"/>
                                <Button Content="1" Style="{StaticResource MaterialDesignFlatButton}"
                                        Background="#2E86AB" Foreground="White" FontWeight="Bold"
                                        Margin="5,0"/>
                                <Button Content="2" Style="{StaticResource MaterialDesignFlatButton}"
                                        Foreground="#2E86AB" FontWeight="Bold" Margin="5,0"/>
                                <Button Content="3" Style="{StaticResource MaterialDesignFlatButton}"
                                        Foreground="#2E86AB" FontWeight="Bold" Margin="5,0"/>
                                <Button Content="&gt;" Style="{StaticResource MaterialDesignFlatButton}"
                                        Foreground="#2E86AB" FontWeight="Bold" Margin="5,0"/>
                            </StackPanel>
                        </StackPanel>
                    </ScrollViewer>
                </Border>
            </Grid>
        </Grid>
    </ScrollViewer>
</UserControl>